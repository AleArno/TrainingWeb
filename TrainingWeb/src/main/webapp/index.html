<!DOCTYPE html>
<html>
<head>
<title>Home</title>
</head>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.css">
 <script type="text/javascript" charset="utf8"
	src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.js"></script>
<script>
//start of the page, show the initial part
$(document).ready(function() {
$('#showDiv').hide();
$('#insert').hide();
$('#search').hide();

var table;
table = $('#table').DataTable({
			"displayLength": 5,
			columns : [ {
				"data" : "cf"
			}, {
				"data" : "name"
			}, {
				"data" : "surname"
			}, {
				"data" : "birth"
			},{
				"defaultContent": "<button class='editButton'>Edit</button>"
			},{
				"defaultContent": "<button class='deleteButton'>Delete</button>"
			}
			]
		});
		table.clear();
});
</script>
<script>
//show the part where you can search with a filter
function toggleSearch(){
$('#home').toggle();
$('#showDiv').toggle();
$('#search').toggle();
}
</script>
<script>
//show the part where you can insert a new Person
function toggleInsert(){
$('#home').toggle();
$('#showDiv').toggle();
$('#insert').toggle();
}
</script>

<script>
//function that send the json to the service that response with a string
	function postInsert() {	
		var cf = $("#cf").val();
		var name = $("#nameInsert").val(); 
		var surname = $("#surnameInsert").val();
		var birth= $("#birth").val();
		
		var input={"cf":cf,"name":name,"surname":surname,"birth":birth};
		var json=JSON.stringify(input);
		$.ajax({
		    type: 'POST',
		    url: 'rest/people/insert',
		    data: json, 
		    success: function(response) {
				alert(response);
			},
		    contentType: "application/json",
		    dataType: 'text'
		});
	}
</script>

<script>
	function postFilter() {	
		var name = $("#name").val(); 
		var surname = $("#surname").val();
		var birthFrom = $("#birthFrom").val();
		var birthTo = $("#birthTo").val();
		var input={"name":name,"surname":surname,"birthFrom":birthFrom,"birthTo":birthTo};
		var json=JSON.stringify(input);
		$.ajax({
		    type: 'POST',
		    url: 'rest/people/input',
		    data: json, 
		    success: function(responseJson) {
				var table = $('#table').DataTable();
				table.clear();
				
				table.rows.add(responseJson).draw();
			},
		    contentType: "application/json",
		    dataType: 'json'
		});
	}

</script>

<body>

</body>
<div id='home'>
SCELTA INIZIALE:<br>
Ricerca:<input type='button' id='toggleFilter' value='FILTER' onclick='toggleSearch()'>
<br>Inserimento:<input type='button' id='toggleDiv' value='DIV' onclick='toggleInsert()'>
</div>



<div id='search'>
Search page:
<table>
  <tr>
    <th>Name:</th>  
    <td><input type='text' id='name'></td>      
  </tr>  
  <tr>
    <th>Surname:</th>
    <td><input type='text' id='surname'></td>
  </tr>
  <tr>
    <th>BirthFrom:</th>
    <td><input type='date' id='birthFrom'></td>
  </tr>
   <tr>
    <th>BirthTo:</th>
    <td><input type='date' id='birthTo'></td>
  </tr>
</table>
<br>
<input type='button' id='postFilter' value='Submit' onclick='postFilter()'>
<input type='button' id='backHome' value='Home' onclick='toggleSearch()'>
<br>
<table id="table" class="table table-bordered">
		<thead>
			<tr>
				<th>CF</th>
				<th>Name</th>
				<th>Surname</th>
				<th>Birth</th>
			</tr>
		</thead>
	</table>
</div>




<div id='insert' align='center'>
Insert page:
<table>
  <tr>
    <th>Cf:</th>
    <td><input type='text' id='cf'></td>
  </tr>
  <tr>
    <th>Name:</th>  
    <td><input type='text' id='nameInsert'></td>      
  </tr>  
  <tr>
    <th>Surname:</th>
    <td><input type='text' id='surnameInsert'></td>
  </tr>
  <tr>
    <th>Birth:</th>
    <td><input type='date' id='birth'></td>
  </tr>
</table><br>
<input type='submit' value='Submit' onclick='postInsert()'>
<input type='button' id='showInsert' value='Home' onclick='toggleInsert()'>
</div>



</body>
</html>